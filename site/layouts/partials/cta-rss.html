<div class="cta-box">
    <h1>Don't miss any updates - subscribe today! </h1>
    <form action="https://cookies.your-amicus.app/sg-law-cookies-func/email_support/add_member" method="post"
          id="email-sub-form">
        <label for="email"></label>
        <input type="email" id="email" name="new_member" autocomplete="email"
                                          placeholder="Enter an email address here"
                                          required>
        <button type="submit">Get Emails ðŸ“©</button>
    </form>
    <form action="index.xml" method="get">
        <button type="submit">Subscribe to RSS ðŸ“°</button>
    </form>
    <p id="form-submit-result"></p>

</div>
<script>
    document.getElementById('email-sub-form').addEventListener('submit', function (event) {
        event.preventDefault()

        // Send an AJAX request instead
        const formData = new FormData(document.getElementById('email-sub-form'));
        const json = JSON.stringify(Object.fromEntries(formData));
        fetch('https://cookies.your-amicus.app/sg-law-cookies-func/email_support/add_member', {
            method: 'POST',
            body: json,
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                console.log(response)
                if (response.ok) {
                    document.getElementById('form-submit-result').innerHTML = 'Thank you for subscribing! ' +
                        'We sent an email to confirm, so please check your inbox or spam folder to see if you got it!'
                } else {
                    document.getElementById('form-submit-result').innerHTML = 'An error occurred. Please try again ' +
                        'later or <a href="email: cookies@your-amicus.app">email me</a> to get some support.'
                }
            })
    })
</script>